---
const personalImageAlt = "Nico Piovano";
---

<article
        class="about-me flex flex-col md:flex-row items-center justify-center gap-12 w-full h-screen text-gray-700 dark:text-gray-300 px-8"
        id="aboutMe">
    <!-- Texto -->
    <div class="text-section order-2 md:order-1 flex-1 [&>p]:mb-6">
        <p>
            <strong>Inicié mi carrera en programación en 2016</strong>, desarrollando con
            paciencia, confianza y de manera resolutiva los distintos desafios propuestos. </p>

        <p>
            Me adapto rápidamente a nuevas tecnologías y proyectos, y siempre busco
            <strong>soluciones pragmáticas</strong> que permitan avanzar de manera efectiva, incluso en entornos
            desafiantes. </p>

        <p>
            Además, he viajado y vivido por varios países de Latinoamérica mientras trabajaba en hostels, lo que
            fortaleció mis
            <strong>habilidades sociales, la adaptabilidad </strong>y la capacidad de colaborar con equipos diversos.
        </p>

        <p>
            Mis metas actuales incluyen expandirme en el <strong>ámbito freelance</strong> y aplicar mi enfoque
            resolutivo y adaptable para generar resultados concretos en cada proyecto. </p>
    </div>


    <!-- Imagen -->
    <div class="image-wrapper order-1 md:order-2 flex-1 relative group flex justify-center items-center">
        <img src="/NicoPhoto.png" alt={personalImageAlt}
             class="rounded-2xl w-72 md:w-80 aspect-square object-cover p-2 rotate-3 bg-black/20 dark:bg-yellow-500/5 ring-1 ring-black/70 dark:ring-white/20 transition-transform duration-500 group-hover:rotate-0 group-hover:scale-110 shadow-2xl"
             style="object-position: 50% 50%">

        <!-- Glow animado -->
        <span class="absolute inset-0 rounded-2xl bg-green-custom/40 blur-4xl opacity-40 group-hover:opacity-60 transition-opacity duration-500 pointer-events-none"></span>
    </div>
</article>

<style>
    :root {
        --green-custom: #6bb184;
    }

    .text-section p strong {
        font-family: monospace;
        font-weight: 700;
        font-size: 1.25em;
        color: var(--green-custom);
        transition: color 0.3s;
    }

    .image-wrapper {
        position: relative;
    }

    .image-wrapper img {
        will-change: transform;
    }
</style>

<script type="module">
    // =======================
    // FUEGOS ARTIFICIALES MÚLTIPLES CON DESVANECIMIENTO GRADUAL
    // =======================

    function triggerFireworksSection() {
        if (document.getElementById('fireworks')) return;

        const canvas = document.createElement('canvas');
        canvas.id = 'fireworks';
        canvas.style.position = 'fixed';
        canvas.style.top = 0;
        canvas.style.left = 0;
        canvas.style.width = '100%';
        canvas.style.height = '100%';
        canvas.style.pointerEvents = 'none';
        canvas.style.zIndex = 9999;
        document.body.appendChild(canvas);

        const ctx = canvas.getContext('2d');
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        class Particle {
            constructor(x, y, color, speed, angle, gravity) {
                this.x = x;
                this.y = y;
                this.color = color;
                this.speed = speed;
                this.angle = angle;
                this.gravity = gravity;
                this.alpha = 1;
            }

            update() {
                this.x += this.speed * Math.cos(this.angle);
                this.y += this.speed * Math.sin(this.angle) + this.gravity;
                this.speed *= 0.95;
                this.alpha -= 0.01; // más gradual
                if (this.alpha < 0) this.alpha = 0;
            }

            draw(ctx) {
                ctx.globalAlpha = this.alpha;
                ctx.beginPath();
                ctx.arc(this.x, this.y, 3, 0, Math.PI * 2);
                ctx.fillStyle = this.color;
                ctx.fill();
                ctx.globalAlpha = 1;
            }
        }

        const fireworks = [];
        const totalExplosions = 10; // más fuegos
        const particlesPerExplosion = 40; // más partículas

        for (let i = 0; i < totalExplosions; i++) {
            setTimeout(() => {
                const x = Math.random() * canvas.width * 0.8 + canvas.width * 0.1;
                const y = Math.random() * canvas.height * 0.4 + 50;
                const hue = Math.random() * 360;
                const colors = [`hsl(${hue}, 100%, 50%)`, `hsl(${hue + 20}, 100%, 60%)`, `hsl(${hue - 20}, 100%, 60%)`];

                for (let j = 0; j < particlesPerExplosion; j++) {
                    const angle = Math.random() * Math.PI * 2;
                    const speed = Math.random() * 6 + 2;
                    const gravity = 0.05;
                    const color = colors[Math.floor(Math.random() * colors.length)];
                    fireworks.push(new Particle(x, y, color, speed, angle, gravity));
                }
            }, i * 300); // más rápido entre explosiones
        }

        let frame = 0;
        const maxFrames = 180; // duración total ~3-4s

        function animate() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            fireworks.forEach(p => {
                p.update();
                p.draw(ctx);
            });
            frame++;
            if (frame < maxFrames) requestAnimationFrame(animate);
            else document.body.removeChild(canvas);
        }

        animate();
    }

    // =======================
    // OBSERVER PARA SECCIÓN
    // =======================
    const section = document.getElementById('aboutMe');

    if (section && window.innerWidth >= 768) {
        const observer = new IntersectionObserver(
            (entries, obs) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        triggerFireworksSection();
                        obs.unobserve(section); // solo una vez
                    }
                });
            },
            {threshold: 0.2} // 50% visible
        );

        observer.observe(section);
    }
</script>
