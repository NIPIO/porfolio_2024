---
import Layout from "@/layouts/Layout.astro"

import AboutMe from "@/modules/AboutMe/AboutMe.astro"
import Briefcase from "@/components/icons/Briefcase.astro"
import CodeIcon from "@/components/icons/Code.astro"
import Experience from "@/modules/Experience/Experience.astro"
import ProfileCheck from "@/components/icons/ProfileCheck.astro"
import Projects from "@/modules/Projects/Projects.astro"
import SectionContainer from "@/modules/Section/SectionContainer.astro"
import Personal from "@/modules/Personal/Personal.astro"
---

<Layout title="Porfolio de Nico Piovano - Desarrollador Web con +7 aÃ±os de experiencia"
        description="Contrata a Nico para crear tu aplicaciÃ³n web o mÃ³vil. Desarrollador Web.">
    <main class="px-4">
        <SectionContainer class="min-h-screen flex items-center">
            <Personal/>
        </SectionContainer>
        <div class="space-y-24">
            <SectionContainer id="experiencia">

                <Experience/>
            </SectionContainer>

            <SectionContainer id="proyectos">
                <h2 class="flex items-center mb-6 text-3xl font-semibold gap-x-3 text-black/80 dark:text-white">
                    <CodeIcon class="size-7"/>
                    Proyectos
                </h2>
                <Projects />
            </SectionContainer>

            <SectionContainer id="sobre-mi">
                <h2 class="flex items-center mb-6 text-3xl font-semibold gap-x-8 text-black/80 dark:text-white">
                    <ProfileCheck class="size-8"/>
                    Sobre mÃ­ ðŸ˜‰
                </h2>
                <AboutMe/>
            </SectionContainer>
        </div>
    </main>
</Layout>

<script>
    let currentScroll = window.scrollY
    let targetScroll = currentScroll
    const ease = 0.08

    function smoothScroll() {
        currentScroll += (targetScroll - currentScroll) * ease
        window.scrollTo(0, currentScroll)
        requestAnimationFrame(smoothScroll)
    }

    window.addEventListener('wheel', (e) => {
        e.preventDefault()
        targetScroll += e.deltaY * 0.8 // â† bajÃ¡ este nÃºmero = mÃ¡s lento
        targetScroll = Math.max(
            0,
            Math.min(targetScroll, document.body.scrollHeight - window.innerHeight)
        )
    }, {passive: false})

    smoothScroll()

    document.querySelectorAll('a[href^="#"]').forEach(link => {
        link.addEventListener('click', (e) => {
            const id = link.getAttribute('href')?.slice(1)
            const target = document.getElementById(id)
            if (!target) return

            e.preventDefault()

            // Ajustar el scroll para dejar espacio para el header fijo (aprox 80px)
            const headerOffset = 80
            targetScroll = target.offsetTop - headerOffset
        })
    })

</script>
